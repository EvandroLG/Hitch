var cssPlugin=function(){document.head.webkitMatchesSelector&&(Element.prototype._setAttribute=Element.prototype.setAttribute,Element.prototype.setAttribute=function(a,b){var c=document.createEvent("MutationEvents"),d=this.getAttribute(a);this._setAttribute(a,b),c.initMutationEvent("DOMAttrModified",!0,!0,null,d,b,a,2),this.dispatchEvent(c)});var a=window.console||{log:function(){}},b={checks:0,queries:0},c,d,e=[],f=[{name:"-plugin-any",base:"",fn:function(a,b){return a.matchesSelector(b)}}],g,h=[],j=[],k=!1,l=function(a,b,c){var d,e;if(a.tagName!=="BODY"&&b.scan!==""){if(a.matchesSelector(b.scan)){for(var f=0;f<b.rules.length;f++)d=x.map[b.rules[f].filter].fn(a,b.rules[f].filterargs),e=b.rules[f].rid,d?p(a,e):q(a,e);c=a}return l(a.parentNode,b,c)}return c},m=function(a,b){while(a.tagName!=="BODY")b.push(a),a=a.parentNode;return b},n=function(c,d){var e=(new Date).getTime(),f,g=c.target||c,h=[];if(c.type==="DOMNodeRemoved"){setTimeout(function(){n({type:"DOMNodeInserted",target:c.relatedNode,relatedNode:c.relatedNode},!1)},1);return}if(!k){b={checks:0,queries:0},k=!0;try{b.queries++;var i=u(c);if(i){var j=r(i);g=l(g,i)||g;return}for(var o=0;o<h.length;o++)h[o]._oldclasses=h[o].className;w(g,c.type==="DOMNodeInserted"?m(c.relatedNode,[g]):!1)}catch(p){a.log(p.message)}finally{b.duration=(new Date).getTime()-e+"ms",a.log(JSON.stringify(b)),k=!1}}},o=function(a,b){return(new RegExp("_"+b)).test((a.target||a).className)},p=function(a,b){var c=a instanceof NodeList?a:[a];for(var d=0;d<c.length;d++)o(c[d],b)||((c[d].target||c[d]).className+=" _"+b)},q=function(a,b){var c=a instanceof NodeList?a:[a];for(var d=0;d<c.length;d++)o(c[d],b)&&((c[d].target||c[d]).className=(c[d].target||c[d]).className.replace(" _"+b,""))},r=function(a){var b=[],d;for(var e=0;e<a.length;e++)a[e].segments&&(d=a[e].segments[0].selector.replace(/._\d/,""),b.indexOf(d!==-1)&&b.push(d));return b.join(",").replace(":-"+c+"-any()","")},s=function(a,b,d){var e,f,g=[],h=!1,i;for(var j=0;j<a.segments.length;j++){i=a.segments[j],e=i.selector.replace(/\._\d/,"").replace(":-"+c+"-any()",""),f=i.filterargs,g.push(e);if(e.indexOf(b)!==-1||f&&f.indexOf(b)!==-1){h=!0;break}}return{a:g.join(" "),b:j-h?0:1}},t={"class":function(a){return"."+a},id:function(a){return"#"+a},attr:function(a){return"["+a}},u=function(a){var b,c=[],d,e="",f="",g=[],i=[],j;if(!a.attrName)return!1;b=t[a.attrName]?t[a.attrName]:t.attr;for(var k=0;k<h.length;k++){d=h[k],d.str||(d.str=JSON.stringify(d)),j=b(a.newValue.trim());if(d.str.indexOf(j)!==-1||b===t.attr&&d.str.indexOf(a.attrName)!==-1){d.index=k;var l=s(d,j,a);l.a&&g.indexOf(l.a)===-1&&g.push(l.a),d.segments[l.b].rid=k,c.push(d.segments[l.b])}}return{scan:g.join(","),rules:c}},v=function(){var a=[],b,c,e,f=0,g,i;if(!d){d={};for(var j=0;j<h.length;j++){c=h[j],b=[];for(var k=0;k<c.segments.length;k++)e=c.segments[k],g=e.selector.replace(/\._\d/,""),b.push(g),e.filter&&(i=b.join(" "),i===""&&(i="*"),d[i]||(d[i]={filters:{}}),d[i].filters[e.filter]||(d[i].filters[e.filter]=[]),d[i].filters[e.filter].push({rid:j,args:e.filterargs}))}}return d},w=function(a,b,c){var d,e,f,g,i,j=h,k,l,m={},n,o=v();for(var e in o){k=b,b?k=b.concat(Array.prototype.slice.call(a.querySelectorAll(e),0)):a.querySelectorAll&&(k=Array.prototype.slice.call(a.querySelectorAll(e),0));for(var r=0;r<k.length;r++){d=k[r],l={target:d},fs=o[e].filters;for(var s in fs){i=fs[s];for(var t=0;t<i.length;t++)g=x.map[s].fn(d,i[t].args,{siblings:d.parentNode.children,location:A}),g?p(l,i[t].rid):q(l,i[t].rid)}}}},x={map:{},parseFilters:function(){return e},init:function(){var b,d,e,f,g=document.createElement("style"),h="-moz-|-ms-|-webkit-|-o-";document.getElementsByTagName("head")[0].appendChild(g),b=document.styleSheets[document.styleSheets.length-1],d=y(),d.push(c),d=new RegExp(d.join("|"));for(i=0;i<j.length;i++){e=j[i].rule.split(","),f=[];for(var k=0;k<e.length;k++)f.push(e[k]),/-[A-z\0...9]*/.test(e[k])&&!d.test(e[k])&&f.pop();f.join(",")===""?(a.log("empty...."+e),b.insertRule(e,b.length-1)):b.insertRule(f.join(","),b.length-1)}n(document.body,document.head.webkitMatchesSelector),document.body.addEventListener("DOMAttrModified",n),document.body.addEventListener("DOMNodeInserted",n),document.body.addEventListener("DOMNodeRemoved",n),document.addEventListener("DOMSubtreeModified",function(a){!a.target._isSetting&&a.target._oldclasses!==a.target.className&&(a.target._isSetting=!0,a.target.setAttribute("class",a.target.className),a.target._oldclasses=a.target.className,a.target._isSetting=!1)})},registerFilter:function(a,b,c,d){c&&(x.map[":"+a]={fn:c,base:b,ancestrallytruthy:d})}};g=function(){var a;if(f){for(var b=0;b<f.length;b++)x.registerFilter(f[b].name,f[b].base,f[b].fn,f[b].ancestrallytruthy);document.body.mozMatchesSelector?(c="-moz-",a="mozMatchesSelector"):document.body.webkitMatchesSelector?(c="-webkit-",a="webkitMatchesSelector"):document.body.oMatchesSelector?(c="-o-",a="oMatchesSelector"):(c="-ms-",a="msMatchesSelector"),document.head.matchesSelector||(Element.prototype.matchesSelector=function(b){return this[a](b)}),j=x.parseFilters();for(var b=0;b<j.length;b++)j[b].segments&&h.push(j[b]);x.init()}};var y=function(){var a=[];for(var b=0;b<f.length;b++)a.push(f[b].name);return a},z=!0,A=window.location.href.split("?")[0].split("/");return A.pop(),A=A.join("/"),document.addEventListener("DOMContentLoaded",function(){z&&g()},!1),{useManualInit:function(){z=!1},init:function(){g()},addCompiledRules:function(a){return e=e.concat(a),this},addFilters:function(a){f=f.concat(a)},getPluginNames:function(){return y()},getBase:function(a){for(var b=0;b<f.length;b++)if(a===f[b].name)return f[b].base}}}(),cssPluginCompiler=function(a){var b,c,d,e,f,g,h,i,j=document.head;matcherFn=j.mozMatchesSelector||j.webkitMatchesSelector||j.msMatchesSelector||j.oMatchesSelector,regExpPart="\\([^\\)]*\\)",care=/(\[|#|\.|:|\w)[A-z|0-9|\-]*/g,compiled=[],mapper={},reverse=[],mc=0,opts={tags:{},attributes:{},ids:{},classes:{}},any="-"+matcherFn.name.replace("MatchesSelector","-any"),a=a.replace(/\@-plugin-alias[^\;]*\;/g,function(a,b,c){var d=a.split(/\s|\;/g);return cssPlugin.addFilters([{name:d[1],base:d[2]}]),""}),n,p,pluginNames=cssPlugin.getPluginNames(),reHasPlugin=new RegExp(pluginNames.join("|")),reHasFn=new RegExp(pluginNames.join(regExpPart+"|")+regExpPart,"g"),b=a.split("}");try{document.head.querySelectorAll(":"+any+"(*)").length}catch(k){any="-plugin-any"}for(var l=0;l<b.length;l++){h=0,c=b[l].trim();if(c!==""){c=b[l]+"}",e=c,o=c.split("{"),d=o[0];if(d!=="*"&&reHasPlugin.test(d)){compiled.push({segments:[]}),d=d.replace(reHasFn,function(a,b,c){var d;typeof mapper[a]=="undefined"&&(mapper[a]={index:mc++,args:a.match(/\((.*)\)/)[1]},reverse.push(a)),g=cssPlugin.getBase(a.split("(")[0]);if(!g||g==="")g="*";return any==="-plugin-any"?(d="",b-=1):d=any+"("+g+")",typeof mapper[a].index!="undefined"&&(d+="._"+mapper[a].index),compiled[compiled.length-1].segments.push({selector:(c.substring(h,b)+d).trim(),filter:":"+a.split("(")[0],filterargs:mapper[a].args}),d}),d=d.trim().replace(/:$/,"").replace(":._","._"),f=d.match(reHasPlugin);if(f)for(var m=0;m<f.length;m++)g=cssPlugin.getBase(f[m]),d=d.replace(new RegExp(":"+f[m],"g"),function(){return g||""});if(compiled[compiled.length-1].segments.length===0)delete compiled[compiled.length-1].segments;else{var n=compiled[compiled.length-1].segments[compiled[compiled.length-1].segments.length-1],p=d.substring(d.indexOf(n.selector)+n.selector.length).trim();p!==""&&compiled[compiled.length-1].segments.push({selector:p})}i=d.match(care);for(var m=i.length-1;m>=0;m--)i[m][0]===":"&&i.splice(m,1);compiled[compiled.length-1].rule=d.trim()+"{"+o[1]}}}return compiled};cssPlugin.useManualInit(),$(document).ready(function(){var promises=[],store=window.localStorage,cv="plugins-cacheversion";$("head [data-plugins]").each(function(i,el){var url,cache=el.getAttribute("data-cacheversion"),scripts=el.getAttribute("data-plugins").split(",");for(var i=0;i<scripts.length;i++)url=scripts[i],store[cv]!==cache&&(store[cv]=cache,cache=!1),cache&&store[url]?eval(store[url]):promises.push($.getScript(url,function(a){store[cv]&&(store[url]=a)}))}),$.when.apply($,promises).then(function(){var a=[],b;$("[data-usesplugins]").each(function(b,c){var d,e=c.getAttribute("data-cacheversion");store[cv]!==e&&(store[cv]=e,e=!1),c.tagName==="STYLE"?cssPlugin.addCompiledRules(cssPluginCompiler(c.innerHTML)):e&&store[c.href]?cssPlugin.addCompiledRules(JSON.parse(store[c.href])):(d=c.href,a.push($.get(d,function(a){var b=cssPluginCompiler(a);e&&setTimeout(function(){store[d]=JSON.stringify(b)},10),cssPlugin.addCompiledRules(b)},"text")))}),$.when.apply($,a).then(function(){cssPlugin.init()})})});